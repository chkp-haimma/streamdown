"use strict";"use client";var Zo=Object.create;var fe=Object.defineProperty;var Go=Object.getOwnPropertyDescriptor;var Yo=Object.getOwnPropertyNames;var Qo=Object.getPrototypeOf,en=Object.prototype.hasOwnProperty;var tn=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),on=(e,t)=>{for(var o in t)fe(e,o,{get:t[o],enumerable:!0})},dt=(e,t,o,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Yo(t))!en.call(e,s)&&s!==o&&fe(e,s,{get:()=>t[s],enumerable:!(n=Go(t,s))||n.enumerable});return e};var _=(e,t,o)=>(o=e!=null?Zo(Qo(e)):{},dt(t||!e||!e.__esModule?fe(o,"default",{value:e,enumerable:!0}):o,e)),nn=e=>dt(fe({},"__esModule",{value:!0}),e);var Po=tn((Ss,To)=>{"use strict";var Oe=Object.prototype.hasOwnProperty,Co=Object.prototype.toString,go=Object.defineProperty,bo=Object.getOwnPropertyDescriptor,yo=function(t){return typeof Array.isArray=="function"?Array.isArray(t):Co.call(t)==="[object Array]"},wo=function(t){if(!t||Co.call(t)!=="[object Object]")return!1;var o=Oe.call(t,"constructor"),n=t.constructor&&t.constructor.prototype&&Oe.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!o&&!n)return!1;var s;for(s in t);return typeof s=="undefined"||Oe.call(t,s)},ko=function(t,o){go&&o.name==="__proto__"?go(t,o.name,{enumerable:!0,configurable:!0,value:o.newValue,writable:!0}):t[o.name]=o.newValue},vo=function(t,o){if(o==="__proto__")if(Oe.call(t,o)){if(bo)return bo(t,o).value}else return;return t[o]};To.exports=function e(){var t,o,n,s,r,a,i=arguments[0],l=1,c=arguments.length,d=!1;for(typeof i=="boolean"&&(d=i,i=arguments[1]||{},l=2),(i==null||typeof i!="object"&&typeof i!="function")&&(i={});l<c;++l)if(t=arguments[l],t!=null)for(o in t)n=vo(i,o),s=vo(t,o),i!==s&&(d&&s&&(wo(s)||(r=yo(s)))?(r?(r=!1,a=n&&yo(n)?n:[]):a=n&&wo(n)?n:{},ko(i,{name:o,newValue:e(d,a,s)})):typeof s!="undefined"&&ko(i,{name:o,newValue:s}));return i}});var Qn={};on(Qn,{Block:()=>lt,Streamdown:()=>Jo,StreamdownContext:()=>v,defaultRehypePlugins:()=>Xo,defaultRemarkPlugins:()=>Ko,defaultUrlTransform:()=>at,parseIncompleteMarkdown:()=>qe,parseMarkdownIntoBlocks:()=>De});module.exports=nn(Qn);var H=require("react");var mt=require("react"),rn=0;function ut(e="id"){let t=(0,mt.useRef)(null);return t.current===null&&(t.current=`${e}-${++rn}`),t.current}var he=require("react");function pt(){let[e,t]=(0,he.useState)(!1),o=(0,he.useCallback)(n=>{t(!0),setTimeout(()=>{try{n()}finally{t(!1)}},0)},[]);return[e,o]}var zo=require("rehype-harden"),Fe=_(require("rehype-katex"),1),qo=_(require("rehype-raw"),1),Fo=_(require("remark-cjk-friendly"),1),Uo=_(require("remark-cjk-friendly-gfm-strikethrough"),1),Vo=_(require("remark-gfm"),1),Wo=_(require("remark-math"),1);var y=require("react");var S=require("react");var te=require("react"),ft=(e,t=200,o=50)=>{let[n,s]=(0,te.useState)(e),r=(0,te.useRef)(0),a=(0,te.useRef)(null);return(0,te.useEffect)(()=>{let i=Date.now(),l=i-r.current;return a.current&&window.clearTimeout(a.current),l>=t?(s(e),r.current=i):a.current=window.setTimeout(()=>{s(e),r.current=Date.now()},o),()=>{a.current&&window.clearTimeout(a.current)}},[e,t,o]),n};var ht=require("clsx"),gt=require("tailwind-merge"),u=(...e)=>(0,gt.twMerge)((0,ht.clsx)(e)),z=(e,t,o)=>{let n=typeof t=="string"?new Blob([t],{type:o}):t,s=URL.createObjectURL(n),r=document.createElement("a");r.href=s,r.download=e,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(s)};var ge=u("[&_code]:[counter-reset:line]","[&_code]:[counter-increment:line_0]","[&_.line]:before:content-[counter(line)]","[&_.line]:before:inline-block","[&_.line]:before:[counter-increment:line]","[&_.line]:before:w-4","[&_.line]:before:mr-4","[&_.line]:before:text-[13px]","[&_.line]:before:text-right","[&_.line]:before:text-muted-foreground/50","[&_.line]:before:font-mono","[&_.line]:before:select-none"),be=u("dark:[&_.shiki]:!text-[var(--shiki-dark)]","dark:[&_.shiki]:!bg-[var(--shiki-dark-bg)]","dark:[&_.shiki]:![font-style:var(--shiki-dark-font-style)]","dark:[&_.shiki]:![font-weight:var(--shiki-dark-font-weight)]","dark:[&_.shiki]:![text-decoration:var(--shiki-dark-text-decoration)]","dark:[&_.shiki_span]:!text-[var(--shiki-dark)]","dark:[&_.shiki_span]:![font-style:var(--shiki-dark-font-style)]","dark:[&_.shiki_span]:![font-weight:var(--shiki-dark-font-weight)]","dark:[&_.shiki_span]:![text-decoration:var(--shiki-dark-text-decoration)]"),ye=u("[&_.line.highlighted]:bg-blue-50","[&_.line.highlighted]:after:bg-blue-500","[&_.line.highlighted]:after:absolute","[&_.line.highlighted]:after:left-0","[&_.line.highlighted]:after:top-0","[&_.line.highlighted]:after:bottom-0","[&_.line.highlighted]:after:w-0.5","dark:[&_.line.highlighted]:!bg-blue-500/10"),we=u("[&_.line.diff]:after:absolute","[&_.line.diff]:after:left-0","[&_.line.diff]:after:top-0","[&_.line.diff]:after:bottom-0","[&_.line.diff]:after:w-0.5","[&_.line.diff.add]:bg-emerald-50","[&_.line.diff.add]:after:bg-emerald-500","[&_.line.diff.remove]:bg-rose-50","[&_.line.diff.remove]:after:bg-rose-500","dark:[&_.line.diff.add]:!bg-emerald-500/10","dark:[&_.line.diff.remove]:!bg-rose-500/10"),ke=u("[&_code:has(.focused)_.line]:blur-[2px]","[&_code:has(.focused)_.line.focused]:blur-none"),ve=u("[&_.highlighted-word]:bg-blue-50","dark:[&_.highlighted-word]:!bg-blue-500/10"),Ce=u("[&_.shiki]:!bg-[var(--shiki-bg)]");var Te=require("react"),de=(0,Te.createContext)({code:""}),Pe=()=>(0,Te.useContext)(de);var me=require("react/jsx-runtime"),Me=({language:e,children:t})=>(0,me.jsxs)("div",{className:"flex items-center justify-between bg-muted/80 p-3 text-muted-foreground text-xs","data-code-block-header":!0,"data-language":e,children:[(0,me.jsx)("span",{className:"ml-1 font-mono lowercase",children:e}),(0,me.jsx)("div",{className:"flex items-center gap-2",children:t})]});var kt=require("shiki"),vt=require("shiki/engine/javascript");var bt=require("shiki"),yt=e=>e?[{pre(o){return this.addClassToHast(o,e),o}}]:[],Ue=e=>Object.hasOwn(bt.bundledLanguages,e),wt=()=>"text";var Ve=class{constructor(){this.highlighter=null;this.lightTheme=null;this.darkTheme=null;this.loadedLanguages=new Set;this.initializationPromise=null;this.loadLanguagePromise=null;this.cache=new Map;this.cacheKeys=[];this.MAX_CACHE_SIZE=500;this.highlightQueue=new Map}getCacheKey(t,o,n){return`${o}::${n||""}::${t}`}addToCache(t,o){if(this.cache.size>=this.MAX_CACHE_SIZE){let n=this.cacheKeys.shift();n&&this.cache.delete(n)}this.cache.set(t,o),this.cacheKeys.push(t)}needsHighlighterInitialization(t){let[o,n]=t;return!this.highlighter||this.lightTheme!==o||this.darkTheme!==n}async ensureHighlighterInitialized(t){let[o,n]=t,s=(0,vt.createJavaScriptRegexEngine)({forgiving:!0});this.loadedLanguages.clear(),this.cache.clear(),this.cacheKeys=[],this.highlightQueue.clear(),this.highlighter=await(0,kt.createHighlighter)({themes:[o,n],langs:[],engine:s}),this.lightTheme=o,this.darkTheme=n}async loadLanguage(t){var o;await((o=this.highlighter)==null?void 0:o.loadLanguage(t)),this.loadedLanguages.add(t)}async initializeHighlighters(t){this.initializationPromise&&await this.initializationPromise,this.needsHighlighterInitialization(t)&&(this.initializationPromise=this.ensureHighlighterInitialized(t),await this.initializationPromise,this.initializationPromise=null)}performHighlight(t,o,n){let s=Ue(o)?o:wt();if(this.highlighter===null||this.lightTheme===null||this.darkTheme===null)throw new Error("highlightCode must be called after initializeHighlighters.");let r=yt(n);return this.highlighter.codeToHtml(t,{lang:s,themes:{light:this.lightTheme,dark:this.darkTheme},transformers:r})}async highlightCode(t,o,n,s){let r=this.getCacheKey(t,o,n),a=this.cache.get(r);if(a)return this.cacheKeys=this.cacheKeys.filter(d=>d!==r),this.cacheKeys.push(r),a;let i=this.highlightQueue.get(r);if(i)return i;let l=()=>{if(s!=null&&s.aborted)throw new DOMException("Aborted","AbortError")},c=(async()=>{try{l(),this.initializationPromise&&await this.initializationPromise,l(),this.loadLanguagePromise&&await this.loadLanguagePromise,l(),!this.loadedLanguages.has(o)&&Ue(o)&&(this.loadLanguagePromise=this.loadLanguage(o),await this.loadLanguagePromise,this.loadLanguagePromise=null),l();let m=this.performHighlight(t,o,n);return this.addToCache(r,m),m}finally{this.highlightQueue.delete(r)}})();return this.highlightQueue.set(r,c),c}},oe=new Ve;var Ct=e=>e<50?{minHighlightInterval:100,debounceMs:500}:e<150?{minHighlightInterval:500,debounceMs:800}:e<300?{minHighlightInterval:1500,debounceMs:1200}:{minHighlightInterval:Number.POSITIVE_INFINITY,debounceMs:1500},xe=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),Tt=e=>{let t=e.lastIndexOf(`
`),o=t>=0?e.slice(0,t+1):"",n=t>=0?e.slice(t+1):e;return[o,n]};var ie=require("react/jsx-runtime"),Pt=({code:e,language:t,className:o,children:n,preClassName:s,...r})=>{let{shikiTheme:a}=(0,S.useContext)(v),[i,l]=(0,S.useState)(""),[c,d]=(0,S.useState)(""),[m,p]=(0,S.useState)(""),h=ft(e),f=(0,S.useRef)(0),b=(0,S.useRef)(!1),w=(0,S.useRef)(null),C=(0,S.useRef)(0),[T,N]=a;(0,S.useEffect)(()=>{oe.initializeHighlighters([T,N])},[T,N]),(0,S.useEffect)(()=>{b.current=!0,w.current&&w.current.abort(),w.current=new AbortController;let I=w.current.signal;f.current&&clearTimeout(f.current);let[R,A]=Tt(h),W=h.split(`
`).length,{minHighlightInterval:$,debounceMs:j}=Ct(W);if(R&&R!==c){let B=Date.now();B-C.current>$||!A?(C.current=B,oe.highlightCode(R,t,s,I).then(L=>{b.current&&!I.aborted&&(0,S.startTransition)(()=>{l(L),d(R),p(A)})}).catch(L=>{if(L.name!=="AbortError")throw L})):p(A)}else p(A);return f.current=window.setTimeout(()=>{A&&h!==c&&!I.aborted&&oe.highlightCode(h,t,s,I).then(B=>{b.current&&!I.aborted&&(0,S.startTransition)(()=>{l(B),d(h),p("")})}).catch(B=>{if(B.name!=="AbortError")throw B})},j),()=>{var B;b.current=!1,(B=w.current)==null||B.abort()}},[h,t,s]);let x=m?`<span class="line"><span>${xe(m)}</span></span>`:"";return(0,ie.jsx)(de.Provider,{value:{code:e},children:(0,ie.jsxs)("div",{className:"my-4 w-full overflow-hidden rounded-xl border border-border","data-code-block-container":!0,"data-language":t,children:[(0,ie.jsx)(Me,{language:t,children:n}),(0,ie.jsx)("div",{className:u(ge,Ce,be,ye,we,ke,ve,o),dangerouslySetInnerHTML:{__html:x?i+x:i},"data-code-block":!0,"data-language":t,...r})]})})};var Ne=require("lucide-react"),X=require("react");var We=require("react/jsx-runtime"),Xe=({onCopy:e,onError:t,timeout:o=2e3,children:n,className:s,code:r,...a})=>{let[i,l]=(0,X.useState)(!1),c=(0,X.useRef)(0),{code:d}=Pe(),{isAnimating:m}=(0,X.useContext)(v),p=r!=null?r:d,h=async()=>{var b;if(typeof window=="undefined"||!((b=navigator==null?void 0:navigator.clipboard)!=null&&b.writeText)){t==null||t(new Error("Clipboard API not available"));return}try{i||(await navigator.clipboard.writeText(p),l(!0),e==null||e(),c.current=window.setTimeout(()=>l(!1),o))}catch(w){t==null||t(w)}};(0,X.useEffect)(()=>()=>{window.clearTimeout(c.current)},[]);let f=i?Ne.CheckIcon:Ne.CopyIcon;return(0,We.jsx)("button",{className:u("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",s),disabled:m,onClick:h,type:"button",...a,children:n!=null?n:(0,We.jsx)(f,{size:14})})};var xt=require("lucide-react"),Nt=require("react");var Ke=require("react/jsx-runtime"),Mt={"1c":"1c","1c-query":"1cq",abap:"abap","actionscript-3":"as",ada:"ada",adoc:"adoc","angular-html":"html","angular-ts":"ts",apache:"conf",apex:"cls",apl:"apl",applescript:"applescript",ara:"ara",asciidoc:"adoc",asm:"asm",astro:"astro",awk:"awk",ballerina:"bal",bash:"sh",bat:"bat",batch:"bat",be:"be",beancount:"beancount",berry:"berry",bibtex:"bib",bicep:"bicep",blade:"blade.php",bsl:"bsl",c:"c","c#":"cs","c++":"cpp",cadence:"cdc",cairo:"cairo",cdc:"cdc",clarity:"clar",clj:"clj",clojure:"clj","closure-templates":"soy",cmake:"cmake",cmd:"cmd",cobol:"cob",codeowners:"CODEOWNERS",codeql:"ql",coffee:"coffee",coffeescript:"coffee","common-lisp":"lisp",console:"sh",coq:"v",cpp:"cpp",cql:"cql",crystal:"cr",cs:"cs",csharp:"cs",css:"css",csv:"csv",cue:"cue",cypher:"cql",d:"d",dart:"dart",dax:"dax",desktop:"desktop",diff:"diff",docker:"dockerfile",dockerfile:"dockerfile",dotenv:"env","dream-maker":"dm",edge:"edge",elisp:"el",elixir:"ex",elm:"elm","emacs-lisp":"el",erb:"erb",erl:"erl",erlang:"erl",f:"f","f#":"fs",f03:"f03",f08:"f08",f18:"f18",f77:"f77",f90:"f90",f95:"f95",fennel:"fnl",fish:"fish",fluent:"ftl",for:"for","fortran-fixed-form":"f","fortran-free-form":"f90",fs:"fs",fsharp:"fs",fsl:"fsl",ftl:"ftl",gdresource:"tres",gdscript:"gd",gdshader:"gdshader",genie:"gs",gherkin:"feature","git-commit":"gitcommit","git-rebase":"gitrebase",gjs:"js",gleam:"gleam","glimmer-js":"js","glimmer-ts":"ts",glsl:"glsl",gnuplot:"plt",go:"go",gql:"gql",graphql:"graphql",groovy:"groovy",gts:"gts",hack:"hack",haml:"haml",handlebars:"hbs",haskell:"hs",haxe:"hx",hbs:"hbs",hcl:"hcl",hjson:"hjson",hlsl:"hlsl",hs:"hs",html:"html","html-derivative":"html",http:"http",hxml:"hxml",hy:"hy",imba:"imba",ini:"ini",jade:"jade",java:"java",javascript:"js",jinja:"jinja",jison:"jison",jl:"jl",js:"js",json:"json",json5:"json5",jsonc:"jsonc",jsonl:"jsonl",jsonnet:"jsonnet",jssm:"jssm",jsx:"jsx",julia:"jl",kotlin:"kt",kql:"kql",kt:"kt",kts:"kts",kusto:"kql",latex:"tex",lean:"lean",lean4:"lean",less:"less",liquid:"liquid",lisp:"lisp",lit:"lit",llvm:"ll",log:"log",logo:"logo",lua:"lua",luau:"luau",make:"mak",makefile:"mak",markdown:"md",marko:"marko",matlab:"m",md:"md",mdc:"mdc",mdx:"mdx",mediawiki:"wiki",mermaid:"mmd",mips:"s",mipsasm:"s",mmd:"mmd",mojo:"mojo",move:"move",nar:"nar",narrat:"narrat",nextflow:"nf",nf:"nf",nginx:"conf",nim:"nim",nix:"nix",nu:"nu",nushell:"nu",objc:"m","objective-c":"m","objective-cpp":"mm",ocaml:"ml",pascal:"pas",perl:"pl",perl6:"p6",php:"php",plsql:"pls",po:"po",polar:"polar",postcss:"pcss",pot:"pot",potx:"potx",powerquery:"pq",powershell:"ps1",prisma:"prisma",prolog:"pl",properties:"properties",proto:"proto",protobuf:"proto",ps:"ps",ps1:"ps1",pug:"pug",puppet:"pp",purescript:"purs",py:"py",python:"py",ql:"ql",qml:"qml",qmldir:"qmldir",qss:"qss",r:"r",racket:"rkt",raku:"raku",razor:"cshtml",rb:"rb",reg:"reg",regex:"regex",regexp:"regexp",rel:"rel",riscv:"s",rs:"rs",rst:"rst",ruby:"rb",rust:"rs",sas:"sas",sass:"sass",scala:"scala",scheme:"scm",scss:"scss",sdbl:"sdbl",sh:"sh",shader:"shader",shaderlab:"shader",shell:"sh",shellscript:"sh",shellsession:"sh",smalltalk:"st",solidity:"sol",soy:"soy",sparql:"rq",spl:"spl",splunk:"spl",sql:"sql","ssh-config":"config",stata:"do",styl:"styl",stylus:"styl",svelte:"svelte",swift:"swift","system-verilog":"sv",systemd:"service",talon:"talon",talonscript:"talon",tasl:"tasl",tcl:"tcl",templ:"templ",terraform:"tf",tex:"tex",tf:"tf",tfvars:"tfvars",toml:"toml",ts:"ts","ts-tags":"ts",tsp:"tsp",tsv:"tsv",tsx:"tsx",turtle:"ttl",twig:"twig",typ:"typ",typescript:"ts",typespec:"tsp",typst:"typ",v:"v",vala:"vala",vb:"vb",verilog:"v",vhdl:"vhdl",vim:"vim",viml:"vim",vimscript:"vim",vue:"vue","vue-html":"html","vue-vine":"vine",vy:"vy",vyper:"vy",wasm:"wasm",wenyan:"wy",wgsl:"wgsl",wiki:"wiki",wikitext:"wiki",wit:"wit",wl:"wl",wolfram:"wl",xml:"xml",xsl:"xsl",yaml:"yaml",yml:"yml",zenscript:"zs",zig:"zig",zsh:"zsh",\u6587\u8A00:"wy"},St=({onDownload:e,onError:t,language:o,children:n,className:s,code:r,...a})=>{let{code:i}=Pe(),{isAnimating:l}=(0,Nt.useContext)(v),c=r!=null?r:i,m=`file.${o&&o in Mt?Mt[o]:"txt"}`,p="text/plain",h=()=>{try{z(m,c,p),e==null||e()}catch(f){t==null||t(f)}};return(0,Ke.jsx)("button",{className:u("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",s),disabled:l,onClick:h,title:"Download file",type:"button",...a,children:n!=null?n:(0,Ke.jsx)(xt.DownloadIcon,{size:14})})};var U=require("react");var ae=require("react/jsx-runtime"),sn=(e,t)=>{let o=xe(e);return`<pre class="${t||""}"><code>${o}</code></pre>`},It=({code:e,language:t,className:o,children:n,preClassName:s,...r})=>{let{shikiTheme:a}=(0,U.useContext)(v),[i,l]=a,[c,d]=(0,U.useState)(sn(e,s)),m=(0,U.useRef)(!1);return(0,U.useEffect)(()=>{oe.initializeHighlighters([i,l])},[i,l]),(0,U.useEffect)(()=>(m.current=!0,oe.highlightCode(e,t,s).then(p=>{m.current&&d(p)}).catch(()=>{}),()=>{m.current=!1}),[e,t,s]),(0,ae.jsx)(de.Provider,{value:{code:e},children:(0,ae.jsxs)("div",{className:"my-4 w-full overflow-hidden rounded-xl border border-border","data-code-block-container":!0,"data-language":t,children:[(0,ae.jsx)(Me,{language:t,children:n}),(0,ae.jsx)("div",{className:u(ge,Ce,be,ye,we,ke,ve,o),dangerouslySetInnerHTML:{__html:c},"data-code-block":!0,"data-language":t,...r})]})})};var Bt=require("lucide-react");var ne=require("react/jsx-runtime"),an=/\.[^/.]+$/,Lt=({node:e,className:t,src:o,alt:n,...s})=>{let r=async()=>{if(o)try{let i=await(await fetch(o)).blob(),c=new URL(o,window.location.origin).pathname.split("/").pop()||"",d=c.split(".").pop(),m=c.includes(".")&&d!==void 0&&d.length<=4,p="";if(m)p=c;else{let h=i.type,f="png";h.includes("jpeg")||h.includes("jpg")?f="jpg":h.includes("png")?f="png":h.includes("svg")?f="svg":h.includes("gif")?f="gif":h.includes("webp")&&(f="webp"),p=`${(n||c||"image").replace(an,"")}.${f}`}z(p,i,i.type)}catch(a){console.error("Failed to download image:",a)}};return o?(0,ne.jsxs)("div",{className:"group relative my-4 inline-block","data-streamdown":"image-wrapper",children:[(0,ne.jsx)("img",{alt:n,className:u("max-w-full rounded-lg",t),"data-streamdown":"image",src:o,...s}),(0,ne.jsx)("div",{className:"pointer-events-none absolute inset-0 hidden rounded-lg bg-black/10 group-hover:block"}),(0,ne.jsx)("button",{className:u("absolute right-2 bottom-2 flex h-8 w-8 cursor-pointer items-center justify-center rounded-md border border-border bg-background/90 shadow-sm backdrop-blur-sm transition-all duration-200 hover:bg-background","opacity-0 group-hover:opacity-100"),onClick:r,title:"Download image",type:"button",children:(0,ne.jsx)(Bt.DownloadIcon,{size:14})})]}):null};var q=require("react");var le=require("lucide-react"),M=require("react");var D=require("react/jsx-runtime"),Ht=({children:e,className:t,minZoom:o=.5,maxZoom:n=3,zoomStep:s=.1,showControls:r=!0,initialZoom:a=1,fullscreen:i=!1})=>{let l=(0,M.useRef)(null),c=(0,M.useRef)(null),[d,m]=(0,M.useState)(a),[p,h]=(0,M.useState)({x:0,y:0}),[f,b]=(0,M.useState)(!1),[w,C]=(0,M.useState)({x:0,y:0}),[T,N]=(0,M.useState)({x:0,y:0}),x=(0,M.useCallback)(k=>{m(L=>Math.max(o,Math.min(n,L+k)))},[o,n]),I=(0,M.useCallback)(()=>{x(s)},[x,s]),R=(0,M.useCallback)(()=>{x(-s)},[x,s]),A=(0,M.useCallback)(()=>{m(a),h({x:0,y:0})},[a]),W=(0,M.useCallback)(k=>{k.preventDefault();let L=k.deltaY>0?-s:s;x(L)},[x,s]),$=(0,M.useCallback)(k=>{if(k.button!==0||k.isPrimary===!1)return;b(!0),C({x:k.clientX,y:k.clientY}),N(p);let L=k.currentTarget;L instanceof HTMLElement&&L.setPointerCapture(k.pointerId)},[p]),j=(0,M.useCallback)(k=>{if(!f)return;k.preventDefault();let L=k.clientX-w.x,ct=k.clientY-w.y;h({x:T.x+L,y:T.y+ct})},[f,w,T]),B=(0,M.useCallback)(k=>{b(!1);let L=k.currentTarget;L instanceof HTMLElement&&L.releasePointerCapture(k.pointerId)},[]);return(0,M.useEffect)(()=>{let k=l.current;if(k)return k.addEventListener("wheel",W,{passive:!1}),()=>{k.removeEventListener("wheel",W)}},[W]),(0,M.useEffect)(()=>{let k=c.current;if(k&&f)return document.body.style.userSelect="none",k.addEventListener("pointermove",j,{passive:!1}),k.addEventListener("pointerup",B),k.addEventListener("pointercancel",B),()=>{document.body.style.userSelect="",k.removeEventListener("pointermove",j),k.removeEventListener("pointerup",B),k.removeEventListener("pointercancel",B)}},[f,j,B]),(0,D.jsxs)("div",{className:u("relative",i?"h-full w-full":"w-full",t),ref:l,style:{cursor:f?"grabbing":"grab"},children:[r&&(0,D.jsxs)("div",{className:u("absolute z-10 flex flex-col gap-1 rounded-md border border-border bg-background/90 p-1 shadow-sm backdrop-blur-sm",i?"bottom-4 left-4":"bottom-2 left-2"),children:[(0,D.jsx)("button",{className:"flex items-center justify-center rounded p-1.5 text-muted-foreground transition-colors hover:bg-muted hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",disabled:d>=n,onClick:I,title:"Zoom in",type:"button",children:(0,D.jsx)(le.ZoomInIcon,{size:16})}),(0,D.jsx)("button",{className:"flex items-center justify-center rounded p-1.5 text-muted-foreground transition-colors hover:bg-muted hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",disabled:d<=o,onClick:R,title:"Zoom out",type:"button",children:(0,D.jsx)(le.ZoomOutIcon,{size:16})}),(0,D.jsx)("button",{className:"flex items-center justify-center rounded p-1.5 text-muted-foreground transition-colors hover:bg-muted hover:text-foreground",onClick:A,title:"Reset zoom and pan",type:"button",children:(0,D.jsx)(le.RotateCcwIcon,{size:16})})]}),(0,D.jsx)("div",{className:u("origin-center transition-transform duration-150 ease-out",i&&"flex h-full w-full items-center justify-center"),onPointerDown:$,ref:c,role:"application",style:{transform:`translate(${p.x}px, ${p.y}px) scale(${d})`,transformOrigin:"center center",touchAction:"none",willChange:"transform"},children:e})]})};var Se=async e=>{let o={...{startOnLoad:!1,theme:"default",securityLevel:"strict",fontFamily:"monospace",suppressErrorRendering:!0},...e},s=(await import("mermaid")).default;return s.initialize(o),s},Et=(e,t)=>{var n;let o=(n=t==null?void 0:t.scale)!=null?n:5;return new Promise((s,r)=>{let a="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e))),i=new Image;i.crossOrigin="anonymous",i.onload=()=>{let l=document.createElement("canvas"),c=i.width*o,d=i.height*o;l.width=c,l.height=d;let m=l.getContext("2d");if(!m){r(new Error("Failed to create 2D canvas context for PNG export"));return}m.drawImage(i,0,0,c,d),l.toBlob(p=>{if(!p){r(new Error("Failed to create PNG blob"));return}s(p)},"image/png")},i.onerror=()=>r(new Error("Failed to load SVG image")),i.src=a})};var E=require("react/jsx-runtime"),Ie=({chart:e,className:t,config:o,fullscreen:n=!1})=>{let[s,r]=(0,q.useState)(null),[a,i]=(0,q.useState)(!0),[l,c]=(0,q.useState)(""),[d,m]=(0,q.useState)(""),[p,h]=(0,q.useState)(0),{mermaid:f}=(0,q.useContext)(v),b=f==null?void 0:f.errorComponent;if((0,q.useEffect)(()=>{(async()=>{try{r(null),i(!0);let T=await Se(o),N=e.split("").reduce((R,A)=>(R<<5)-R+A.charCodeAt(0)|0,0),x=`mermaid-${Math.abs(N)}-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,{svg:I}=await T.render(x,e);c(I),m(I)}catch(T){if(!(d||l)){let N=T instanceof Error?T.message:"Failed to render Mermaid chart";r(N)}}finally{i(!1)}})()},[e,o,p]),a&&!l&&!d)return(0,E.jsx)("div",{className:u("my-4 flex justify-center p-4",t),children:(0,E.jsxs)("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[(0,E.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-current border-b-2"}),(0,E.jsx)("span",{className:"text-sm",children:"Loading diagram..."})]})});if(s&&!l&&!d){let C=()=>h(T=>T+1);return b?(0,E.jsx)(b,{chart:e,error:s,retry:C}):(0,E.jsxs)("div",{className:u("rounded-lg border border-red-200 bg-red-50 p-4",t),children:[(0,E.jsxs)("p",{className:"font-mono text-red-700 text-sm",children:["Mermaid Error: ",s]}),(0,E.jsxs)("details",{className:"mt-2",children:[(0,E.jsx)("summary",{className:"cursor-pointer text-red-600 text-xs",children:"Show Code"}),(0,E.jsx)("pre",{className:"mt-2 overflow-x-auto rounded bg-red-100 p-2 text-red-800 text-xs",children:e})]})]})}let w=l||d;return(0,E.jsx)(Ht,{className:u(n?"h-full w-full overflow-hidden":"my-4 overflow-hidden",t),fullscreen:n,maxZoom:3,minZoom:.5,showControls:!0,zoomStep:.1,children:(0,E.jsx)("div",{"aria-label":"Mermaid chart",className:u("flex justify-center",n&&"h-full w-full items-center"),dangerouslySetInnerHTML:{__html:w},role:"img"})})};var At=require("lucide-react"),K=require("react");var V=require("react/jsx-runtime"),Ot=({chart:e,children:t,className:o,onDownload:n,config:s,onError:r})=>{let[a,i]=(0,K.useState)(!1),l=(0,K.useRef)(null),{isAnimating:c}=(0,K.useContext)(v),d=async m=>{try{if(m==="mmd"){z("diagram.mmd",e,"text/plain"),i(!1),n==null||n(m);return}let p=await Se(s),h=e.split("").reduce((w,C)=>(w<<5)-w+C.charCodeAt(0)|0,0),f=`mermaid-${Math.abs(h)}-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,{svg:b}=await p.render(f,e);if(!b){r==null||r(new Error("SVG not found. Please wait for the diagram to render."));return}if(m==="svg"){z("diagram.svg",b,"image/svg+xml"),i(!1),n==null||n(m);return}if(m==="png"){let w=await Et(b);z("diagram.png",w,"image/png"),n==null||n(m),i(!1);return}}catch(p){r==null||r(p)}};return(0,K.useEffect)(()=>{let m=p=>{l.current&&!l.current.contains(p.target)&&i(!1)};return document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}},[]),(0,V.jsxs)("div",{className:"relative",ref:l,children:[(0,V.jsx)("button",{className:u("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",o),disabled:c,onClick:()=>i(!a),title:"Download diagram",type:"button",children:t!=null?t:(0,V.jsx)(At.DownloadIcon,{size:14})}),a&&(0,V.jsxs)("div",{className:"absolute top-full right-0 z-10 mt-1 min-w-[120px] overflow-hidden rounded-md border border-border bg-background shadow-lg",children:[(0,V.jsx)("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>d("svg"),type:"button",children:"SVG"}),(0,V.jsx)("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>d("png"),type:"button",children:"PNG"}),(0,V.jsx)("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>d("mmd"),type:"button",children:"MMD"})]})]})};var Be=require("lucide-react"),re=require("react");var O=require("react/jsx-runtime"),ue=0,ln=()=>{ue+=1,ue===1&&(document.body.style.overflow="hidden")},cn=()=>{ue=Math.max(0,ue-1),ue===0&&(document.body.style.overflow="")},Rt=({chart:e,config:t,onFullscreen:o,onExit:n,className:s,...r})=>{let[a,i]=(0,re.useState)(!1),{isAnimating:l}=(0,re.useContext)(v),c=()=>{i(!a)};return(0,re.useEffect)(()=>{if(a){ln();let d=m=>{m.key==="Escape"&&i(!1)};return document.addEventListener("keydown",d),()=>{document.removeEventListener("keydown",d),cn()}}},[a]),(0,re.useEffect)(()=>{a?o==null||o():n&&n()},[a,o,n]),(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)("button",{className:u("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",s),disabled:l,onClick:c,title:"View fullscreen",type:"button",...r,children:(0,O.jsx)(Be.Maximize2Icon,{size:14})}),a&&(0,O.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-background/95 backdrop-blur-sm",onClick:c,onKeyDown:d=>{d.key==="Escape"&&c()},role:"button",tabIndex:0,children:[(0,O.jsx)("button",{className:"absolute top-4 right-4 z-10 rounded-md p-2 text-muted-foreground transition-all hover:bg-muted hover:text-foreground",onClick:c,title:"Exit fullscreen",type:"button",children:(0,O.jsx)(Be.XIcon,{size:20})}),(0,O.jsx)("div",{className:"flex h-full w-full items-center justify-center p-4",onClick:d=>d.stopPropagation(),onKeyDown:d=>d.stopPropagation(),role:"presentation",children:(0,O.jsx)(Ie,{chart:e,className:"h-full w-full [&>div]:h-full [&>div]:overflow-hidden [&_svg]:h-auto [&_svg]:w-auto",config:t,fullscreen:!0})})]})]})};var Ee=require("lucide-react"),F=require("react");var Le=e=>{var r,a;let t=[],o=[],n=e.querySelectorAll("thead th");for(let i of n)t.push(((r=i.textContent)==null?void 0:r.trim())||"");let s=e.querySelectorAll("tbody tr");for(let i of s){let l=[],c=i.querySelectorAll("td");for(let d of c)l.push(((a=d.textContent)==null?void 0:a.trim())||"");o.push(l)}return{headers:t,rows:o}},He=e=>{let{headers:t,rows:o}=e,n=r=>r.includes(",")||r.includes('"')||r.includes(`
`)?`"${r.replace(/"/g,'""')}"`:r,s=[];t.length>0&&s.push(t.map(n).join(","));for(let r of o)s.push(r.map(n).join(","));return s.join(`
`)},_t=e=>{let{headers:t,rows:o}=e,n=r=>r.replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r"),s=[];t.length>0&&s.push(t.map(n).join("	"));for(let r of o)s.push(r.map(n).join("	"));return s.join(`
`)},$t=e=>e.replace(/\\/g,"\\\\").replace(/\|/g,"\\|"),Dt=e=>{let{headers:t,rows:o}=e;if(t.length===0)return"";let n=[],s=t.map(r=>$t(r));n.push(`| ${s.join(" | ")} |`),n.push(`| ${t.map(()=>"---").join(" | ")} |`);for(let r of o){let a=[...r];for(;a.length<t.length;)a.push("");let i=a.map(l=>$t(l));n.push(`| ${i.join(" | ")} |`)}return n.join(`
`)};var J=require("react/jsx-runtime"),jt=({children:e,className:t,onCopy:o,onError:n,timeout:s=2e3})=>{let[r,a]=(0,F.useState)(!1),[i,l]=(0,F.useState)(!1),c=(0,F.useRef)(null),d=(0,F.useRef)(0),{isAnimating:m}=(0,F.useContext)(v),p=async f=>{var b,w;if(typeof window=="undefined"||!((b=navigator==null?void 0:navigator.clipboard)!=null&&b.write)){n==null||n(new Error("Clipboard API not available"));return}try{let C=(w=c.current)==null?void 0:w.closest('[data-streamdown="table-wrapper"]'),T=C==null?void 0:C.querySelector("table");if(!T){n==null||n(new Error("Table not found"));return}let N=Le(T),x=f==="csv"?He(N):_t(N),I=new ClipboardItem({"text/plain":new Blob([x],{type:"text/plain"}),"text/html":new Blob([T.outerHTML],{type:"text/html"})});await navigator.clipboard.write([I]),l(!0),a(!1),o==null||o(f),d.current=window.setTimeout(()=>l(!1),s)}catch(C){n==null||n(C)}};(0,F.useEffect)(()=>{let f=b=>{c.current&&!c.current.contains(b.target)&&a(!1)};return document.addEventListener("mousedown",f),()=>{document.removeEventListener("mousedown",f),window.clearTimeout(d.current)}},[]);let h=i?Ee.CheckIcon:Ee.CopyIcon;return(0,J.jsxs)("div",{className:"relative",ref:c,children:[(0,J.jsx)("button",{className:u("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",t),disabled:m,onClick:()=>a(!r),title:"Copy table",type:"button",children:e!=null?e:(0,J.jsx)(h,{size:14})}),r&&(0,J.jsxs)("div",{className:"absolute top-full right-0 z-10 mt-1 min-w-[120px] overflow-hidden rounded-md border border-border bg-background shadow-lg",children:[(0,J.jsx)("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>p("csv"),type:"button",children:"CSV"}),(0,J.jsx)("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>p("tsv"),type:"button",children:"TSV"})]})]})};var zt=require("lucide-react"),G=require("react");var Z=require("react/jsx-runtime");var qt=({children:e,className:t,onDownload:o,onError:n})=>{let[s,r]=(0,G.useState)(!1),a=(0,G.useRef)(null),{isAnimating:i}=(0,G.useContext)(v),l=c=>{var d;try{let m=(d=a.current)==null?void 0:d.closest('[data-streamdown="table-wrapper"]'),p=m==null?void 0:m.querySelector("table");if(!p){n==null||n(new Error("Table not found"));return}let h=Le(p),f=c==="csv"?He(h):Dt(h);z(`table.${c==="csv"?"csv":"md"}`,f,c==="csv"?"text/csv":"text/markdown"),r(!1),o==null||o(c)}catch(m){n==null||n(m)}};return(0,G.useEffect)(()=>{let c=d=>{a.current&&!a.current.contains(d.target)&&r(!1)};return document.addEventListener("mousedown",c),()=>{document.removeEventListener("mousedown",c)}},[]),(0,Z.jsxs)("div",{className:"relative",ref:a,children:[(0,Z.jsx)("button",{className:u("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",t),disabled:i,onClick:()=>r(!s),title:"Download table",type:"button",children:e!=null?e:(0,Z.jsx)(zt.DownloadIcon,{size:14})}),s&&(0,Z.jsxs)("div",{className:"absolute top-full right-0 z-10 mt-1 min-w-[120px] overflow-hidden rounded-md border border-border bg-background shadow-lg",children:[(0,Z.jsx)("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>l("csv"),type:"button",children:"CSV"}),(0,Z.jsx)("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>l("markdown"),type:"button",children:"Markdown"})]})]})};var Y=require("react/jsx-runtime"),Ft=({children:e,className:t,showControls:o,...n})=>(0,Y.jsxs)("div",{className:"my-4 flex flex-col space-y-2","data-streamdown":"table-wrapper",children:[o&&(0,Y.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,Y.jsx)(jt,{}),(0,Y.jsx)(qt,{})]}),(0,Y.jsx)("div",{className:"overflow-x-auto",children:(0,Y.jsx)("table",{className:u("w-full border-collapse border border-border",t),"data-streamdown":"table",...n,children:e})})]});var g=require("react/jsx-runtime"),dn=/language-([^\s]+)/;function Ae(e,t){if(!(e!=null&&e.position||t!=null&&t.position))return!0;if(!(e!=null&&e.position&&(t!=null&&t.position)))return!1;let o=e.position.start,n=t.position.start,s=e.position.end,r=t.position.end;return(o==null?void 0:o.line)===(n==null?void 0:n.line)&&(o==null?void 0:o.column)===(n==null?void 0:n.column)&&(s==null?void 0:s.line)===(r==null?void 0:r.line)&&(s==null?void 0:s.column)===(r==null?void 0:r.column)}function P(e,t){return e.className===t.className&&Ae(e.node,t.node)}var Ze=(e,t)=>typeof e=="boolean"?e:e[t]!==!1,Je=(e,t)=>{if(typeof e=="boolean")return e;let o=e.mermaid;return o===!1?!1:o===!0||o===void 0?!0:o[t]!==!1},Ge=(0,y.memo)(({children:e,className:t,node:o,...n})=>(0,g.jsx)("ol",{className:u("ml-4 list-outside list-decimal whitespace-normal",t),"data-streamdown":"ordered-list",...n,children:e}),(e,t)=>P(e,t));Ge.displayName="MarkdownOl";var Ut=(0,y.memo)(({children:e,className:t,node:o,...n})=>(0,g.jsx)("li",{className:u("py-1",t),"data-streamdown":"list-item",...n,children:e}),(e,t)=>e.className===t.className&&Ae(e.node,t.node));Ut.displayName="MarkdownLi";var Vt=(0,y.memo)(({children:e,className:t,node:o,...n})=>(0,g.jsx)("ul",{className:u("ml-4 list-outside list-disc whitespace-normal",t),"data-streamdown":"unordered-list",...n,children:e}),(e,t)=>P(e,t));Vt.displayName="MarkdownUl";var Wt=(0,y.memo)(({className:e,node:t,...o})=>(0,g.jsx)("hr",{className:u("my-6 border-border",e),"data-streamdown":"horizontal-rule",...o}),(e,t)=>P(e,t));Wt.displayName="MarkdownHr";var Xt=(0,y.memo)(({children:e,className:t,node:o,...n})=>(0,g.jsx)("span",{className:u("font-semibold",t),"data-streamdown":"strong",...n,children:e}),(e,t)=>P(e,t));Xt.displayName="MarkdownStrong";var Kt=(0,y.memo)(({children:e,className:t,href:o,node:n,...s})=>{let r=o==="streamdown:incomplete-link";return(0,g.jsx)("a",{className:u("wrap-anywhere font-medium text-primary underline",t),"data-incomplete":r,"data-streamdown":"link",href:o,rel:"noreferrer",target:"_blank",...s,children:e})},(e,t)=>P(e,t)&&e.href===t.href);Kt.displayName="MarkdownA";var Jt=(0,y.memo)(({children:e,className:t,node:o,...n})=>(0,g.jsx)("h1",{className:u("mt-6 mb-2 font-semibold text-3xl",t),"data-streamdown":"heading-1",...n,children:e}),(e,t)=>P(e,t));Jt.displayName="MarkdownH1";var Zt=(0,y.memo)(({children:e,className:t,node:o,...n})=>(0,g.jsx)("h2",{className:u("mt-6 mb-2 font-semibold text-2xl",t),"data-streamdown":"heading-2",...n,children:e}),(e,t)=>P(e,t));Zt.displayName="MarkdownH2";var Gt=(0,y.memo)(({children:e,className:t,node:o,...n})=>(0,g.jsx)("h3",{className:u("mt-6 mb-2 font-semibold text-xl",t),"data-streamdown":"heading-3",...n,children:e}),(e,t)=>P(e,t));Gt.displayName="MarkdownH3";var Yt=(0,y.memo)(({children:e,className:t,node:o,...n})=>(0,g.jsx)("h4",{className:u("mt-6 mb-2 font-semibold text-lg",t),"data-streamdown":"heading-4",...n,children:e}),(e,t)=>P(e,t));Yt.displayName="MarkdownH4";var Qt=(0,y.memo)(({children:e,className:t,node:o,...n})=>(0,g.jsx)("h5",{className:u("mt-6 mb-2 font-semibold text-base",t),"data-streamdown":"heading-5",...n,children:e}),(e,t)=>P(e,t));Qt.displayName="MarkdownH5";var eo=(0,y.memo)(({children:e,className:t,node:o,...n})=>(0,g.jsx)("h6",{className:u("mt-6 mb-2 font-semibold text-sm",t),"data-streamdown":"heading-6",...n,children:e}),(e,t)=>P(e,t));eo.displayName="MarkdownH6";var to=(0,y.memo)(({children:e,className:t,node:o,...n})=>{let{controls:s}=(0,y.useContext)(v),r=Ze(s,"table");return(0,g.jsx)(Ft,{className:t,"data-streamdown":"table-wrapper",showControls:r,...n,children:e})},(e,t)=>P(e,t));to.displayName="MarkdownTable";var oo=(0,y.memo)(({children:e,className:t,node:o,...n})=>(0,g.jsx)("thead",{className:u("bg-muted/80",t),"data-streamdown":"table-header",...n,children:e}),(e,t)=>P(e,t));oo.displayName="MarkdownThead";var no=(0,y.memo)(({children:e,className:t,node:o,...n})=>(0,g.jsx)("tbody",{className:u("divide-y divide-border bg-muted/40",t),"data-streamdown":"table-body",...n,children:e}),(e,t)=>P(e,t));no.displayName="MarkdownTbody";var ro=(0,y.memo)(({children:e,className:t,node:o,...n})=>(0,g.jsx)("tr",{className:u("border-border border-b",t),"data-streamdown":"table-row",...n,children:e}),(e,t)=>P(e,t));ro.displayName="MarkdownTr";var so=(0,y.memo)(({children:e,className:t,node:o,...n})=>(0,g.jsx)("th",{className:u("whitespace-nowrap px-4 py-2 text-left font-semibold text-sm",t),"data-streamdown":"table-header-cell",...n,children:e}),(e,t)=>P(e,t));so.displayName="MarkdownTh";var io=(0,y.memo)(({children:e,className:t,node:o,...n})=>(0,g.jsx)("td",{className:u("px-4 py-2 text-sm",t),"data-streamdown":"table-cell",...n,children:e}),(e,t)=>P(e,t));io.displayName="MarkdownTd";var ao=(0,y.memo)(({children:e,className:t,node:o,...n})=>(0,g.jsx)("blockquote",{className:u("my-4 border-muted-foreground/30 border-l-4 pl-4 text-muted-foreground italic",t),"data-streamdown":"blockquote",...n,children:e}),(e,t)=>P(e,t));ao.displayName="MarkdownBlockquote";var lo=(0,y.memo)(({children:e,className:t,node:o,...n})=>(0,g.jsx)("sup",{className:u("text-sm",t),"data-streamdown":"superscript",...n,children:e}),(e,t)=>P(e,t));lo.displayName="MarkdownSup";var co=(0,y.memo)(({children:e,className:t,node:o,...n})=>(0,g.jsx)("sub",{className:u("text-sm",t),"data-streamdown":"subscript",...n,children:e}),(e,t)=>P(e,t));co.displayName="MarkdownSub";var mo=(0,y.memo)(({children:e,className:t,node:o,...n})=>{if("data-footnotes"in n){let r=l=>{var p,h;if(!(0,y.isValidElement)(l))return!1;let c=Array.isArray(l.props.children)?l.props.children:[l.props.children],d=!1,m=!1;for(let f of c)if(f){if(typeof f=="string")f.trim()!==""&&(d=!0);else if((0,y.isValidElement)(f))if(((p=f.props)==null?void 0:p["data-footnote-backref"])!==void 0)m=!0;else{let b=Array.isArray(f.props.children)?f.props.children:[f.props.children];for(let w of b){if(typeof w=="string"&&w.trim()!==""){d=!0;break}if((0,y.isValidElement)(w)&&((h=w.props)==null?void 0:h["data-footnote-backref"])===void 0){d=!0;break}}}}return m&&!d},a=Array.isArray(e)?e.map(l=>{if(!(0,y.isValidElement)(l))return l;if(l.type===Ge){let d=(Array.isArray(l.props.children)?l.props.children:[l.props.children]).filter(m=>!r(m));return d.length===0?null:{...l,props:{...l.props,children:d}}}return l}):e;return(Array.isArray(a)?a.some(l=>l!==null):a!==null)?(0,g.jsx)("section",{className:t,...n,children:a}):null}return(0,g.jsx)("section",{className:t,...n,children:e})},(e,t)=>P(e,t));mo.displayName="MarkdownSection";var mn=({node:e,className:t,children:o,...n})=>{var h,f,b;let s=((h=e==null?void 0:e.position)==null?void 0:h.start.line)===((f=e==null?void 0:e.position)==null?void 0:f.end.line),{mermaid:r,controls:a,mode:i}=(0,y.useContext)(v),l=i==="static"?It:Pt;if(s)return(0,g.jsx)("code",{className:u("rounded bg-muted px-1.5 py-0.5 font-mono text-sm",t),"data-streamdown":"inline-code",...n,children:o});let c=t==null?void 0:t.match(dn),d=(b=c==null?void 0:c.at(1))!=null?b:"",m="";if((0,y.isValidElement)(o)&&o.props&&typeof o.props=="object"&&"children"in o.props&&typeof o.props.children=="string"?m=o.props.children:typeof o=="string"&&(m=o),d==="mermaid"){let w=Ze(a,"mermaid"),C=Je(a,"download"),T=Je(a,"copy"),N=Je(a,"fullscreen");return(0,g.jsxs)("div",{className:u("group relative my-4 h-auto rounded-xl border p-4",t),"data-streamdown":"mermaid-block",children:[w&&(C||T||N)&&(0,g.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[C&&(0,g.jsx)(Ot,{chart:m,config:r==null?void 0:r.config}),T&&(0,g.jsx)(Xe,{code:m}),N&&(0,g.jsx)(Rt,{chart:m,config:r==null?void 0:r.config})]}),(0,g.jsx)(Ie,{chart:m,config:r==null?void 0:r.config})]})}let p=Ze(a,"code");return(0,g.jsx)(l,{className:u("overflow-x-auto border-border border-t",t),code:m,"data-language":d,"data-streamdown":"code-block",language:d,preClassName:"overflow-x-auto font-mono text-xs p-4 bg-muted/40",children:p&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(St,{code:m,language:d}),(0,g.jsx)(Xe,{})]})})},uo=(0,y.memo)(mn,(e,t)=>e.className===t.className&&Ae(e.node,t.node));uo.displayName="MarkdownCode";var po=(0,y.memo)(Lt,(e,t)=>e.className===t.className&&Ae(e.node,t.node));po.displayName="MarkdownImg";var fo=(0,y.memo)(({children:e,className:t,node:o,...n})=>{var a;let r=(Array.isArray(e)?e:[e]).filter(i=>i!=null&&i!=="");return r.length===1&&(0,y.isValidElement)(r[0])&&((a=r[0].props.node)==null?void 0:a.tagName)==="img"?(0,g.jsx)(g.Fragment,{children:e}):(0,g.jsx)("p",{className:t,...n,children:e})},(e,t)=>P(e,t));fo.displayName="MarkdownParagraph";var ho={ol:Ge,li:Ut,ul:Vt,hr:Wt,strong:Xt,a:Kt,h1:Jt,h2:Zt,h3:Gt,h4:Yt,h5:Qt,h6:eo,table:to,thead:oo,tbody:no,tr:ro,th:so,td:io,blockquote:ao,code:uo,img:po,pre:({children:e})=>e,sup:lo,sub:co,p:fo,section:mo};var Lo=require("hast-util-to-jsx-runtime"),_e=require("html-url-attributes"),ce=require("react/jsx-runtime"),Ho=_(require("remark-parse"),1),Eo=_(require("remark-rehype"),1);function Ye(e){if(e)throw e}var $e=_(Po(),1);function pe(e){if(typeof e!="object"||e===null)return!1;let t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Qe(){let e=[],t={run:o,use:n};return t;function o(...s){let r=-1,a=s.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);i(null,...s);function i(l,...c){let d=e[++r],m=-1;if(l){a(l);return}for(;++m<s.length;)(c[m]===null||c[m]===void 0)&&(c[m]=s[m]);s=c,d?Mo(d,i)(...c):a(null,...c)}}function n(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return e.push(s),t}}function Mo(e,t){let o;return n;function n(...a){let i=e.length>a.length,l;i&&a.push(s);try{l=e.apply(this,a)}catch(c){let d=c;if(i&&o)throw d;return s(d)}i||(l&&l.then&&typeof l.then=="function"?l.then(r,s):l instanceof Error?s(l):r(l))}function s(a,...i){o||(o=!0,t(a,...i))}function r(a){s(null,a)}}var Io=require("vfile");var xo=(function(e){let n=this.constructor.prototype,s=n[e],r=function(){return s.apply(r,arguments)};return Object.setPrototypeOf(r,n),r});var un={}.hasOwnProperty,nt=class e extends xo{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Qe()}copy(){let t=new e,o=-1;for(;++o<this.attachers.length;){let n=this.attachers[o];t.use(...n)}return t.data((0,$e.default)(!0,{},this.namespace)),t}data(t,o){return typeof t=="string"?arguments.length===2?(ot("data",this.frozen),this.namespace[t]=o,this):un.call(this.namespace,t)&&this.namespace[t]||void 0:t?(ot("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;let t=this;for(;++this.freezeIndex<this.attachers.length;){let[o,...n]=this.attachers[this.freezeIndex];if(n[0]===!1)continue;n[0]===!0&&(n[0]=void 0);let s=o.call(t,...n);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();let o=Re(t),n=this.parser||this.Parser;return et("parse",n),n(String(o),o)}process(t,o){let n=this;return this.freeze(),et("process",this.parser||this.Parser),tt("process",this.compiler||this.Compiler),o?s(void 0,o):new Promise(s);function s(r,a){let i=Re(t),l=n.parse(i);n.run(l,i,function(d,m,p){if(d||!m||!p)return c(d);let h=m,f=n.stringify(h,p);fn(f)?p.value=f:p.result=f,c(d,p)});function c(d,m){d||!m?a(d):r?r(m):o(void 0,m)}}}processSync(t){let o=!1,n;return this.freeze(),et("processSync",this.parser||this.Parser),tt("processSync",this.compiler||this.Compiler),this.process(t,s),So("processSync","process",o),n;function s(r,a){o=!0,Ye(r),n=a}}run(t,o,n){No(t),this.freeze();let s=this.transformers;return!n&&typeof o=="function"&&(n=o,o=void 0),n?r(void 0,n):new Promise(r);function r(a,i){let l=Re(o);s.run(t,l,c);function c(d,m,p){let h=m||t;d?i(d):a?a(h):n(void 0,h,p)}}}runSync(t,o){let n=!1,s;return this.run(t,o,r),So("runSync","run",n),s;function r(a,i){Ye(a),s=i,n=!0}}stringify(t,o){this.freeze();let n=Re(o),s=this.compiler||this.Compiler;return tt("stringify",s),No(t),s(t,n)}use(t,...o){let n=this.attachers,s=this.namespace;if(ot("use",this.frozen),t!=null)if(typeof t=="function")l(t,o);else if(typeof t=="object")Array.isArray(t)?i(t):a(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function r(c){if(typeof c=="function")l(c,[]);else if(typeof c=="object")if(Array.isArray(c)){let[d,...m]=c;l(d,m)}else a(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function a(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");i(c.plugins),c.settings&&(s.settings=(0,$e.default)(!0,s.settings,c.settings))}function i(c){let d=-1;if(c!=null)if(Array.isArray(c))for(;++d<c.length;){let m=c[d];r(m)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function l(c,d){let m=-1,p=-1;for(;++m<n.length;)if(n[m][0]===c){p=m;break}if(p===-1)n.push([c,...d]);else if(d.length>0){let[h,...f]=d,b=n[p][1];pe(b)&&pe(h)&&(h=(0,$e.default)(!0,b,h)),n[p]=[c,h,...f]}}}},rt=new nt().freeze();function et(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function tt(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function ot(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function No(e){if(!pe(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function So(e,t,o){if(!o)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Re(e){return pn(e)?e:new Io.VFile(e)}function pn(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function fn(e){return typeof e=="string"||hn(e)}function hn(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}var Ao=require("unist-util-visit"),Oo=require("vfile"),gn=/^(https?|ircs?|mailto|xmpp)$/i,st=class{constructor(){this.cache=new Map;this.maxSize=100}generateCacheKey(t){let o=t.rehypePlugins||[],n=t.remarkPlugins||[],s=t.remarkRehypeOptions||{},r=c=>JSON.stringify(c.map(d=>{if(Array.isArray(d)){let[m,p]=d;return{name:typeof m=="function"?m.name:String(m),options:p}}return{name:typeof d=="function"?d.name:String(d),options:null}})),a=r(o),i=r(n),l=JSON.stringify(s);return`${i}::${a}::${l}`}get(t){let o=this.generateCacheKey(t),n=this.cache.get(o);return n&&(this.cache.delete(o),this.cache.set(o,n)),n}set(t,o){let n=this.generateCacheKey(t);if(this.cache.size>=this.maxSize){let s=this.cache.keys().next().value;s&&this.cache.delete(s)}this.cache.set(n,o)}clear(){this.cache.clear()}},Bo=new st,it=e=>{let t=bn(e),o=new Oo.VFile(e.children||"");return wn(t.runSync(t.parse(o),o),e)},bn=e=>{let t=Bo.get(e);if(t)return t;let o=yn(e);return Bo.set(e,o),o},yn=e=>{let t=e.rehypePlugins||[],o=e.remarkPlugins||[],n={allowDangerousHtml:!0,...e.remarkRehypeOptions};return rt().use(Ho.default).use(o).use(Eo.default,n).use(t)};function wn(e,t){let o=t.urlTransform||at;return(0,Ao.visit)(e,s=>{if(s.type==="element"){let r;for(r in _e.urlAttributes)if(Object.hasOwn(_e.urlAttributes,r)&&Object.hasOwn(s.properties,r)){let a=s.properties[r],i=_e.urlAttributes[r];(i===null||i.includes(s.tagName))&&(s.properties[r]=o(String(a||""),r,s))}}}),(0,Lo.toJsxRuntime)(e,{Fragment:ce.Fragment,components:t.components,ignoreInvalidStyle:!0,jsx:ce.jsx,jsxs:ce.jsxs,passKeys:!0,passNode:!0})}var at=e=>{let t=e.indexOf(":"),o=e.indexOf("?"),n=e.indexOf("#"),s=e.indexOf("/");return t===-1||s!==-1&&t>s||o!==-1&&t>o||n!==-1&&t>n||gn.test(e.slice(0,t))?e:""};var Ro=require("marked"),kn=/\[\^[^\]\s]{1,200}\](?!:)/,vn=/\[\^[^\]\s]{1,200}\]:/,Cn=/<\/(\w+)>/,Tn=/<(\w+)[\s>]/,De=e=>{let t=kn.test(e),o=vn.test(e);if(t||o)return[e];let n=Ro.Lexer.lex(e,{gfm:!0}),s=[],r=[];for(let a of n){let i=a.raw;if(r.length>0){if(s[s.length-1]+=i,a.type==="html"){let l=i.match(Cn);if(l){let c=l[1];r.at(-1)===c&&r.pop()}}continue}if(a.type==="html"&&a.block){let l=i.match(Tn);if(l){let c=l[1];i.includes(`</${c}>`)||r.push(c)}}if(i.trim()==="$$"&&s.length>0){let l=s.at(-1);if(!l){s.push(i);continue}let c=l.trimStart().startsWith("$$"),d=(l.match(/\$\$/g)||[]).length;if(c&&d%2===1){s[s.length-1]=l+i;continue}}if(s.length>0&&i.trimEnd().endsWith("$$")){let l=s.at(-1);if(!l){s.push(i);continue}let c=l.trimStart().startsWith("$$"),d=(l.match(/\$\$/g)||[]).length,m=(i.match(/\$\$/g)||[]).length;if(c&&d%2===1&&!i.trimStart().startsWith("$$")&&m===1){s[s.length-1]=l+i;continue}}s.push(i)}return s};var Pn=/(\*\*)([^*]*?)$/,Mn=/(__)([^_]*?)$/,xn=/(\*\*\*)([^*]*?)$/,Nn=/(\*)([^*]*?)$/,Sn=/(_)([^_]*?)$/,In=/(`)([^`]*?)$/,Bn=/(~~)([^~]*?)$/,se=/^[\s_~*`]*$/,Do=/^[\s]*[-*+][\s]+$/,Q=/[\p{L}\p{N}_]/u,Ln=/^```[^`\n]*```?$/,Hn=/^\*{4,}$/,ze=e=>{let t=(e.match(/```/g)||[]).length;return t>0&&t%2===0&&e.includes(`
`)},je=null,$o="",En=e=>{let t=e.length,o=new Array(t).fill(!1),n=!1,s=!1;for(let r=0;r<t;r++){let a=e[r],i=r+1<t?e[r+1]:"",l=r+2<t?e[r+2]:"",c=r>0?e[r-1]:"",d=r>1?e[r-2]:"";if(a==="`"&&i==="`"&&l==="`"){n=!n,o[r]=o[r+1]=o[r+2]=n,r+=2;continue}a==="`"&&(i==="`"&&l==="`"||c==="`"&&i==="`"||d==="`"&&c==="`"||n||(s=!s)),o[r]=n||s}return o},_o=(e,t)=>($o!==e&&($o=e,je=En(e)),je&&t<je.length?je[t]:!1),An=e=>{let t=e.lastIndexOf("](");if(t!==-1&&e.indexOf(")",t+2)===-1){let r=-1,a=0;for(let i=t-1;i>=0;i--)if(e[i]==="]")a+=1;else if(e[i]==="["){if(a===0){r=i;break}a-=1}if(r!==-1){let i=r>0&&e[r-1]==="!",l=i?r-1:r,c=e.substring(r+1,t);if(_o(e,l))return e;let d=e.substring(0,l);return i?d:`${d}[${c}](streamdown:incomplete-link)`}}let o=-1,n=!1;for(let s=e.length-1;s>=0;s--)if(e[s]==="["){s>0&&e[s-1]==="!"?(o=s-1,n=!0):(o=s,n=!1);break}if(o!==-1){let s=n?o+2:o+1;if(!(e.indexOf("]",s)!==-1))return _o(e,o)?e:n?e.substring(0,o):`${e}](streamdown:incomplete-link)`}return e},On=e=>{if(ze(e))return e;let t=e.match(Pn);if(t){let o=t[2];if(!o||se.test(o))return e;let n=e.lastIndexOf(t[1]),r=e.substring(0,n).lastIndexOf(`
`),a=r===-1?0:r+1,i=e.substring(a,n);if(Do.test(i)&&o.includes(`
`))return e;if((e.match(/\*\*/g)||[]).length%2===1)return`${e}**`}return e},Rn=e=>{let t=e.match(Mn);if(t){let o=t[2];if(!o||se.test(o))return e;let n=e.lastIndexOf(t[1]),r=e.substring(0,n).lastIndexOf(`
`),a=r===-1?0:r+1,i=e.substring(a,n);if(Do.test(i)&&o.includes(`
`))return e;if((e.match(/__/g)||[]).length%2===1)return`${e}__`}return e},$n=e=>e.split("").reduce((t,o,n)=>{if(o==="*"){let s=e[n-1],r=e[n+1];if(s==="\\"||s&&r&&Q.test(s)&&Q.test(r))return t;let a=n;for(let l=n-1;l>=0;l--){if(e[l]===`
`){a=l+1;break}if(l===0){a=0;break}}if(e.substring(a,n).trim()===""&&(r===" "||r==="	"))return t;if(s!=="*"&&r!=="*")return t+1}return t},0),_n=e=>{if(ze(e))return e;if(e.match(Nn)){let o=-1;for(let r=0;r<e.length;r++)if(e[r]==="*"&&e[r-1]!=="*"&&e[r+1]!=="*"&&e[r-1]!=="\\"){let a=r>0?e[r-1]:"",i=r<e.length-1?e[r+1]:"";if(a&&i&&Q.test(a)&&Q.test(i))continue;o=r;break}if(o===-1)return e;let n=e.substring(o+1);if(!n||se.test(n))return e;if($n(e)%2===1)return`${e}*`}return e},jo=(e,t)=>{let o=!1,n=!1;for(let s=0;s<e.length&&s<t;s+=1){if(e[s]==="\\"&&e[s+1]==="$"){s+=1;continue}e[s]==="$"&&(e[s+1]==="$"?(n=!n,s+=1,o=!1):n||(o=!o))}return o||n},Dn=e=>e.split("").reduce((t,o,n)=>{if(o==="_"){let s=e[n-1],r=e[n+1];if(s==="\\"||jo(e,n)||s&&r&&Q.test(s)&&Q.test(r))return t;if(s!=="_"&&r!=="_")return t+1}return t},0),jn=e=>{if(ze(e))return e;if(e.match(Sn)){let o=-1;for(let r=0;r<e.length;r++)if(e[r]==="_"&&e[r-1]!=="_"&&e[r+1]!=="_"&&e[r-1]!=="\\"&&!jo(e,r)){let a=r>0?e[r-1]:"",i=r<e.length-1?e[r+1]:"";if(a&&i&&Q.test(a)&&Q.test(i))continue;o=r;break}if(o===-1)return e;let n=e.substring(o+1);if(!n||se.test(n))return e;if(Dn(e)%2===1){let r=e.length;for(;r>0&&e[r-1]===`
`;)r-=1;if(r<e.length){let a=e.slice(0,r),i=e.slice(r);return`${a}_${i}`}return`${e}_`}}return e},zn=(e,t)=>{let o=e.substring(t,t+3)==="```",n=t>0&&e.substring(t-1,t+2)==="```",s=t>1&&e.substring(t-2,t+1)==="```";return o||n||s},qn=e=>{let t=0;for(let o=0;o<e.length;o+=1)e[o]==="`"&&!zn(e,o)&&(t+=1);return t},Fn=e=>{if(e.match(Ln)&&!e.includes(`
`))return e.endsWith("``")&&!e.endsWith("```")?`${e}\``:e;let o=(e.match(/```/g)||[]).length,n=o%2===1;if(o>0&&o%2===0&&e.includes(`
`)||(e.endsWith("```\n")||e.endsWith("```"))&&o%2===0)return e;let s=e.match(In);if(s&&!n){let r=s[2];if(!r||se.test(r))return e;if(qn(e)%2===1)return`${e}\``}return e},Un=e=>{let t=e.match(Bn);if(t){let o=t[2];if(!o||se.test(o))return e;if((e.match(/~~/g)||[]).length%2===1)return`${e}~~`}return e};var Vn=e=>{if((e.match(/\$\$/g)||[]).length%2===0)return e;let o=e.indexOf("$$");return o!==-1&&e.indexOf(`
`,o)!==-1&&!e.endsWith(`
`)?`${e}
$$`:`${e}$$`},Wn=e=>{let t=0,o=e.match(/\*+/g)||[];for(let n of o){let s=n.length;s>=3&&(t+=Math.floor(s/3))}return t},Xn=e=>{if(ze(e)||Hn.test(e))return e;let t=e.match(xn);if(t){let o=t[2];if(!o||se.test(o))return e;if(Wn(e)%2===1)return`${e}***`}return e},qe=e=>{if(!e||typeof e!="string")return e;let t=e,o=An(t);return o.endsWith("](streamdown:incomplete-link)")?o:(t=o,t=Xn(t),t=On(t),t=Rn(t),t=_n(t),t=jn(t),t=Fn(t),t=Un(t),t=Vn(t),t)};var ee=require("react/jsx-runtime"),Xo={harden:[zo.harden,{allowedImagePrefixes:["*"],allowedLinkPrefixes:["*"],defaultOrigin:void 0,allowDataImages:!0}],raw:qo.default,katex:[Fe.default,{errorColor:"var(--color-muted-foreground)"}]},Ko={gfm:[Vo.default,{}],math:[Wo.default,{singleDollarTextMath:!1}],cjkFriendly:[Fo.default,{}],cjkFriendlyGfmStrikethrough:[Uo.default,{}]},Kn=Object.values(Xo),Jn=Object.values(Ko),Zn={shikiTheme:["github-light","github-dark"],controls:!0,isAnimating:!1,mode:"streaming",mermaid:void 0},v=(0,H.createContext)(Zn),lt=(0,H.memo)(({content:e,shouldParseIncompleteMarkdown:t,...o})=>{let n=(0,H.useMemo)(()=>typeof e=="string"&&t?qe(e.trim()):e,[e,t]);return(0,ee.jsx)(it,{...o,children:n})},(e,t)=>{if(e.content!==t.content||e.shouldParseIncompleteMarkdown!==t.shouldParseIncompleteMarkdown||e.index!==t.index)return!1;if(e.components!==t.components){let o=Object.keys(e.components||{}),n=Object.keys(t.components||{});if(o.length!==n.length||o.some(s=>{var r,a;return((r=e.components)==null?void 0:r[s])!==((a=t.components)==null?void 0:a[s])}))return!1}return!(e.rehypePlugins!==t.rehypePlugins||e.remarkPlugins!==t.remarkPlugins||e.urlTransform!==t.urlTransform)});lt.displayName="Block";var Gn=["github-light","github-dark"],Yn=e=>{let t=0;for(let o=0;o<e.length;o++){let n=e.charCodeAt(o);t=(t<<5)-t+n,t&=t}return Math.abs(t).toString(36)},Jo=(0,H.memo)(({children:e,mode:t="streaming",parseIncompleteMarkdown:o=!0,components:n,rehypePlugins:s=Kn,remarkPlugins:r=Jn,className:a,shikiTheme:i=Gn,mermaid:l,controls:c=!0,isAnimating:d=!1,urlTransform:m=b=>b,BlockComponent:p=lt,parseMarkdownIntoBlocksFn:h=De,...f})=>{let b=ut(),[w,C]=pt(),[T,N]=(0,H.useState)([]),x=(0,H.useMemo)(()=>h(typeof e=="string"?e:""),[e,h]);(0,H.useEffect)(()=>{t==="streaming"?C(()=>{N(x)}):N(x)},[x,t]);let I=t==="streaming"?T:x,R=(0,H.useMemo)(()=>I.map(($,j)=>`${b}-${Yn($)}-${j}`),[I,b]),A=(0,H.useMemo)(()=>({shikiTheme:i,controls:c,isAnimating:d,mode:t,mermaid:l}),[i,c,d,t,l]),W=(0,H.useMemo)(()=>({...ho,...n}),[n]);return(0,H.useEffect)(()=>{Array.isArray(s)&&s.some($=>Array.isArray($)?$[0]===Fe.default:$===Fe.default)&&import("katex/dist/katex.min.css")},[s]),t==="static"?(0,ee.jsx)(v.Provider,{value:A,children:(0,ee.jsx)("div",{className:u("space-y-4",a),children:(0,ee.jsx)(it,{components:W,rehypePlugins:s,remarkPlugins:r,urlTransform:m,...f,children:e})})}):(0,ee.jsx)(v.Provider,{value:A,children:(0,ee.jsx)("div",{className:u("space-y-4",a),children:I.map(($,j)=>(0,ee.jsx)(p,{components:W,content:$,index:j,rehypePlugins:s,remarkPlugins:r,shouldParseIncompleteMarkdown:o,urlTransform:m,...f},R[j]))})})},(e,t)=>e.children===t.children&&e.shikiTheme===t.shikiTheme&&e.isAnimating===t.isAnimating&&e.mode===t.mode);Jo.displayName="Streamdown";0&&(module.exports={Block,Streamdown,StreamdownContext,defaultRehypePlugins,defaultRemarkPlugins,defaultUrlTransform,parseIncompleteMarkdown,parseMarkdownIntoBlocks});
